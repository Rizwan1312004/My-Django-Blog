{% extends "base.html" %}
{% load static %}
  {% block head %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django Blogs</title>
    {% comment %} <link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet"> {% endcomment %}
    <link href="{% static "blog.css" %}" rel="stylesheet">
  {% endblock %}
 
 {% block content %}
 <div class="nav-scroller py-1 mb-2">
        <nav class="nav d-flex justify-content-between">
          {% for category in categories %}
            <a class="p-2 text-muted" href="{% url 'category_blogs' category.id %}">{{category.category}}</a>
          {% endfor %}
        </nav>
      </div>
{% if featured_blogs %}
{% for post in featured_blogs %}
{% if forloop.first %}    
<div class="jumbotron p-3 p-md-5 text-white rounded bg-dark" style="background-image: url({{ post.featured_image.url }});background-blend-mode: overlay;background-size:cover;">
    <div class="col-md-8 px-0">
      <h1 class="display-4 font-italic">{{ post.title }}</h1>
      <p class="lead my-3">{{post.short_description | truncatewords:30 }}</p>
    <p class="lead mb-0">
      <a href="{% url 'blog_detail' post.slug %}"
        class="text-decoration-none fw-semibold d-inline-flex align-items-center continue-link">
        Continue reading
        <span class="ms-2">→</span>
      </a>
    </p>
    </div>
  </div>
  {% endif %}
{% endfor %}
{% else %}
<div class="jumbotron p-3 p-md-5 text-white rounded bg-dark" style="background-image: url();background-blend-mode: overlay;background-size:cover;">
    <div class="col-md-8 px-0">
      <h1 class="display-4 font-italic">There is no featured post</h1>
    </div>
  </div>
{% endif %}

<h4 class="text-uppercase text-warning" style="letter-spacing: 2px; margin: 1rem 0 1rem 0;">Featured Posts</h4>
<div class="row mb-2">
  {% if featured_blogs and featured_blogs|length > 1 %}
  {% for post in featured_blogs %}
  {% if not forloop.first %}
  <div class="col-md-6">
    <div class="card border-0" >
      <div class="card-body">
          <a href="{% url 'blog_detail' post.slug %}" style="text-decoration: none; color: inherit;">
          <h3>{{ post.title }}</h3>
          <small class="mb-1 text-muted">{{post.created_at|timesince}} ago | {{post.author}}</small>
          <p class="card-text">{{post.short_description | truncatewords:30 }}</p>
        </a>
        </div>
      </div>
    </div>
    {% endif %}
    {% endfor %}
  {% else %}
    <p class="text-muted">There are no featured posts available.</p>
    {% endif %}
  </div>
  

  <h4 class="text-uppercase text-warning" style="letter-spacing: 2px; margin: 1rem 0 1rem 0;">Recent Posts</h4>
 <main role="main" class="row">
        <div class="col-md-8 blog-main">
          <div class="blog-post mb-5 pb-4 border-bottom">
            {% if cat_posts %}
            {% for post in cat_posts %}
                <h2 class="blog-post-title text-dark" style="margin-top: 11px;">{{ post.title }}</h2>
                <p class="blog-post-meta text-muted">{{post.created_at|timesince}} ago by <a href="#" class="text-warning">{{post.author}}</a></p>
                <p>{{ post.blog_body | truncatewords:50 }}</p>
                <a href="{% url 'blog_detail' post.slug %}" class="btn btn-outline-dark btn-sm">Read More</a>
                {% endfor %}
                {% elif posts %}
            {% for post in posts %}
             <h2 class="blog-post-title text-dark" style="margin-top: 11px;">{{ post.title }}</h2>
                <p class="blog-post-meta text-muted">{{post.created_at|timesince}} ago by <a href="#" class="text-warning">{{post.author}}</a></p>
                <p>{{ post.blog_body | truncatewords:50 }}</p>
                <a href="{% url 'blog_detail' post.slug %}" class="btn btn-outline-dark btn-sm">Read More</a>
                {% endfor %}
            {% else %}
              <p class="text-muted">There are no recent posts available.</p>
            {% endif %}
              </div>
        </div>

        <aside class="col-md-4 blog-sidebar">
            <div class="p-4 mb-3 bg-light rounded shadow-sm">
                <h4 class="font-italic border-bottom pb-2">About</h4>
                <p class="mb-0">This is a professional Django blog project built to demonstrate clean UI/UX and backend integration.</p>
            </div>

            <div class="p-4">
                <h4 class="font-italic border-bottom pb-2">Follow Us</h4>
                <ol class="list-unstyled">
                    <li class="mb-2"><a href="https://github.com/Rizwan1312004" class="text-dark">GitHub</a></li>
                    <li class="mb-2"><a href="https://www.linkedin.com/in/rizwan-m-638242292/" class="text-dark">LinkedIn</a></li>
                    <li class="mb-2"><a href="#" class="text-dark">Portfolio</a></li>
                </ol>
            </div>
        </aside>
    </main>
</div>

<footer class="blog-footer bg-light py-5 border-top mt-5">
    <div class="container text-center">
        <p class="mb-1 text-muted">Django blog built with ❤️ by <a href="#" class="text-dark font-weight-bold">Rizwan M</a></p>
        <p><a href="#" class="text-muted">Back to top</a></p>
    </div>
</footer>
{% endblock %}
